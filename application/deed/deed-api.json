{
  "swagger": "2.0",
  "info": {
    "title": "Deeds API",
    "description": "Land Registry Deed API",
    "version": "1.0.0"
  },
  "host": "api.landregistry.gov.uk",
  "schemes": [
    "https"
  ],
  "basePath": "/v1",
  "produces": [
    "application/json"
  ],
  "paths": {
    "/deed": {
      "post": {
        "summary": "Deed",
        "operationId": "addDeed",
        "description": "The post Deed endpoint creates a new deed based on the JSON provided.\nThe reponse will return a URL that can retrieve the created deed. \n",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "text/plain"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Deed_Application"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "URL to the GET endpoint for the deed is returned on successful creation.\n"
          },
          "400": {
            "description": "Bad Request due to invalid schema. Response will include 1 or more schema errors\n",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      }
    },
    "/deed/{deed_reference}": {
      "get": {
        "summary": "Deed",
        "description": "The Deed endpoint returns details of a specific deed based on the unique deed reference.\nThe response includes the Title Number, Property information, Borrower(s) information and deed information.\n",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "deed_reference",
            "in": "path",
            "description": "Unique reference of the deed.",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Deeds"
        ],
        "responses": {
          "200": {
            "description": "A specific deed is returned",
            "schema": {
              "$ref": "#/definitions/Operative_Deed"
            }
          },
          "404": {
            "description": "Deed not found",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "title_number": {
      "pattern": "^([A-Z]{0,3}[1-9][0-9]{0,5}|[0-9]{1,6}[ZT])$",
      "type": "string"
    },
    "PrivateIndividualName": {
      "type": "object",
      "required": [
        "surname",
        "forename",
        "dob",
        "phone_number",
        "address"
      ],
      "properties": {
        "forename": {
          "type": "string"
        },
        "middle_name": {
          "type": "string"
        },
        "surname": {
          "type": "string"
        },
        "dob": {
          "type": "string",
          "pattern": "^(0?[1-9]|[12][0-9]|3[01])[\\/\\-](0?[1-9]|1[012])[/\\-]\\d{4}$"
        },
        "gender": {
          "type": "string",
          "pattern": "^[MFU]{1}"
        },
        "phone_number": {
          "type": "string",
          "pattern": "^(07[\\d]{8,12}|447[\\d]{7,11})$"
        },
        "address": {
          "type": "string",
          "pattern": "(GIR 0AA|[A-PR-UWYZ]([0-9][0-9A-HJKPS-UW]?|[A-HK-Y][0-9][0-9ABEHMNPRV-Y]?) [0-9][ABD-HJLNP-UW-Z]{2})"
        }
      }
    },
    "Borrowers": {
      "type": "array",
      "minItems": 1,
      "$ref": "#/definitions/PrivateIndividualName"
    },
    "Operative_Deed": {
      "type": "object",
      "properties": {
        "deed": {
          "type": "object",
          "description": "Unique deed, consisting of property, borrower and charge information as well as clauses for the deed.",
          "properties": {
            "title_number": {
              "type": "string",
              "description": "Unique Land Registry identifier for the registered estate."
            },
            "borrowers": {
              "$ref": "#/definitions/Borrowers"
            }
          }
        }
      }
    },
    "Deed_Application": {
      "type": "object",
      "required": [
        "title_number",
        "borrowers"
      ],
      "properties": {
        "title_number": {
          "$ref": "#/definitions/title_number"
        },
        "borrowers": {
          "$ref": "#/definitions/Borrowers"
        }
      }
    },
    "properties": {
      "title_number": {
        "$ref": "#/definitions/title_number"
      },
      "borrowers": {
        "type": "array",
        "minItems": 1,
        "items": [
          {
            "type": "object",
            "$ref": "#/definitions/PrivateIndividualName"
          }
        ]
      },
      "Error": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "format": "int32"
          },
          "message": {
            "type": "string"
          }
        }
      }
    }
  }
}